---
title: TypeORM 모델링
category: TypeORM
tag: 
    - TIL
    - orm
    - database
---

## 데코레이터를 사용해서 모델 정의하기

```ts
import {
    Entity,
    PrimaryGeneratedColumn,
    Column,
    ManyToMany,
    JoinColumn
} from "typeorm"
```
필요한 데코레이터들을 `typeorm`에서 import 해온다.

```ts
@Entity()
export class Actor {
    @PrimaryGeneratedColumn()
    id: number;

    @Column()
    name: string;

    @Column({ type: "varchar", name: "movie_title", length: 200 })
    movie: string;
}

@Entity()
export class Movie {
    @PrimaryGeneratedColumn()
    id: number;

    @Column({ type: "varchar", name: "movie_title", length: 200 })
    title: string;

    @Column({ type: "nvarchar", name: "description", length: 1000, nullable: true })
    description: string;

    @Column()
    releasedDate: Date;

    @Column({ default: false })
    isSeries: boolean;

    @CreateDateColumn()
    createdAt: Date;

    @ManyToMany(() => Actor)
    @JoinTable()
    actors: Actor[]
}
```

### 컬럼에 속성 부여하기
`@Column()`의 안에 들어갈 수 있는 옵션은 `type`, `name`, `length`, `default`, `nullable` 등 다양하다.

### nvarchar
`nvarchar` : 유니코드를 지원하는 데이터형으로 다국어지원이 필요한 데이터일 때는 `varchar`가 아닌 `nvarchar`로 설계한다.

### PK키 설정하기
`@PrimaryGeneratedColumn()`을 사용한다.

### CreateDate와 UpdateDate 설정하기
`@CreateDateColumn()`과 `@UpdateDateColumn()` 사용하기

## relations 설정하기

### 1. one-to-one relations

