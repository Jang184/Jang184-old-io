---
title: AWS SQS
category: serverless
tag: AWS
---

## SQS(Simple Queue Service)

> 서버들끼리 사용할 수 있는 메세지 큐를 제공하는 AWS 서비스


한 쪽에서 SQS 큐에 메세지를 넣고 다른 한 쪽에서 메세지를 꺼내보는 간단한 방식이다. 사용자에게 결과를 빨리 보여줘야 하는 작업과 시간이 오래 걸리는 작업을 분리할 때, 중요한 작업과 중요하지 않은 작업을 분리할 때 SQS 큐를 유용하게 사용할 수 있다.

- 메시지 : SQS의 기본 데이터 단위
- 큐 : 메시지를 담는 공간
    - 리전별로 생성해야 하며 HTTP 프로토콜을 이용해 다른 리전끼리 메시지를 주고 받을 수도 있다. 그러므로 큐의 이름은 모든 리전에서 유일해야 한다.
    - 담을 수 있는 메시지의 개수는 무제한이다.
    - 컴퓨터 자료형의 큐와 이름이 같지만 FIFO를 보장하지 않는다.
    - 큐 생성 개수는 무제한이다.
    - 같은 리전 안에서는 데이터 전송이 무료다.
- 배치 (Batch) API : 배치 API 한 번에 메시지를 최대 10개까지 동시에 처리할 수 있다.
- 보기 제한 시간 (Visibility Timeout) : 메시지를 받은 뒤 특정 시간동안 다른 곳에서 동일한 메시지를 다시 꺼내볼 수 없게 하는 기능이다. 큐 하나에 여러 서버가 메시지를 받을 때 동일한 메시지를 동시에 처리하는 것을 방지한다.
- 지연 전송 (Delay Delivery) : 특정 시간동안 메시지를 받지 못하게 하는 기능
- 처리 실패 큐 (Dead Letter Queues) : 보통 메시지를 받고 작업이 처리되면 메시지를 삭제하는 데 설정한 횟수를 초과해 메시지를 받아 삭제되지 않고 남아 있다면 처리 실패 큐로 보낸다.
- 짧은 폴링 (Short Polling) : 메시지 받기 요청을 하면 결과를 바로 받는다. 메시지가 있으면 메시지를 가져오고 없으면 그냥 빠져나온다.
- 긴 폴링 (Long Polling) : 메시지가 있으면 바로 가져오고 메시지가 없으면 메시지가 올 때까지 기다린다. 또는 메시지가 계속 오지 않으면 긴 폴링 제한 시간까지 기다린다.